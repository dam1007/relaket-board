# Gemini를 위한 프로젝트 맞춤형 프롬프트 (GEMINI.md)

이 문서는 `relaket-board` 프로젝트 진행 시 Gemini의 활용도를 높이기 위한 프롬프트 가이드입니다. 아래 예시들을 복사하여 사용하거나, 현재 작업에 맞게 수정하여 사용하세요.

---

## 📖 코드 분석 및 이해

프로젝트의 특정 기능이나 코드 구조에 대한 이해가 필요할 때 사용합니다.

- **전체 기능 흐름 파악**
  > `src/app/member/login` 경로의 로그인 기능 전체 흐름을 알려줘. 사용자가 아이디와 비밀번호를 입력한 후, 서버 액션(`actions.ts`)을 거쳐 세션이 생성되고, `lib/auth.ts`와 Redis가 어떻게 상호작용하는지 단계별로 설명해줘.

- **특정 파일의 역할 분석**
  > `src/lib/knex.ts` 파일의 역할은 무엇이고, 이 프로젝트의 다른 부분(예: 서버 액션)에서 어떻게 사용되는지 예시와 함께 설명해줘.

- **컴포넌트 구조 및 props 분석**
  > `src/components/Pagination/Pagination.tsx` 컴포넌트가 어떤 props를 받아서 어떻게 페이지네이션 UI를 렌더링하는지, 그리고 각 props의 역할이 무엇인지 알려줘.

- **API 라우트 분석**
  > `src/app/api/file/[id]/download/route.ts` 파일은 어떤 요청을 받고, 어떤 과정을 거쳐 파일 다운로드를 처리하는지 설명해줘.

---

## ✨ 기능 추가 및 생성

새로운 컴포넌트, 페이지, API 등을 만들 때 사용합니다.

- **신규 페이지 생성**
  > `src/app/mypage` 경로에 새로운 마이페이지를 만들어줘. 이 페이지는 로그인한 사용자만 접근할 수 있어야 하고, 사용자의 아이디와 가입일을 표시해야 해. `member.css.ts` 스타일을 재사용해서 간단한 UI를 구성해줘.

- **재사용 가능한 컴포넌트 생성**
  > `src/components/Modal` 경로에 재사용 가능한 모달(Modal) 컴포넌트를 만들어줘. `isOpen`, `onClose` props를 받고, 모달의 배경을 클릭하면 닫히도록 구현해줘. 스타일은 `Vanilla Extract`를 사용하고, 기본적인 `modal.css.ts` 파일도 함께 생성해줘.

- **서버 액션 추가**
  > 게시글 상세 페이지(`src/app/board/detail`)에 댓글을 추가하는 기능을 만들고 싶어. `actions.ts` 파일에 `addComment`라는 서버 액션을 추가해줘. 이 액션은 `postId`, `userId`, `content`를 인자로 받아서 `relaket_comment` 테이블(새로 정의 필요)에 데이터를 저장해야 해.

- **DB 마이그레이션 파일 생성 (Knex)**
  > `relaket_user` 테이블에 사용자의 마지막 로그인 일시를 기록하기 위한 `last_login_at` (datetime 타입) 컬럼을 추가하고 싶어. 이를 위한 Knex 마이그레이션 파일을 생성하는 명령어를 알려줘.

---

## 🔄 코드 수정 및 리팩토링

기존 코드를 개선하거나 버그를 수정할 때 사용합니다.

- **리팩토링 제안**
  > `src/app/board/list/SearchForm.tsx` 컴포넌트의 상태 관리 로직이 복잡해 보여. `useState` 대신 `useReducer`를 사용해서 리팩토링하면 어떻게 개선될 수 있을지 코드를 수정해줘.

- **성능 최적화**
  > 게시글 목록 페이지(`src/app/board/list/page.tsx`)에서 데이터를 불러오는 부분이 느린 것 같아. 데이터베이스 쿼리(knex)나 렌더링 과정에서 최적화할 수 있는 부분이 있는지 분석하고 개선 방안을 제시해줘.

- **버그 수정**
  > 파일 업로드 시 파일명이 한글이면 깨지는 문제가 있어. `src/app/api/upload/route.ts`에서 파일명을 처리하는 부분을 수정해서 UTF-8 인코딩이 올바르게 적용되도록 수정해줘.

- **스타일 수정 (Vanilla Extract)**
  > `src/components/Header/Header.tsx` 컴포넌트의 디자인을 수정하고 싶어. `Header.css.ts` 파일에 모바일 화면(768px 이하)에서 메뉴가 햄버거 버튼으로 바뀌는 반응형 스타일을 추가해줘.

---

## 🧪 테스트 코드 작성

- **컴포넌트 테스트**
  > `src/components/InputText/InputText.tsx` 컴포넌트에 대한 테스트 코드를 작성해줘. `placeholder`가 올바르게 렌더링되는지, 값 입력 시 `onChange` 함수가 호출되는지 확인하는 테스트가 필요해. (테스트 라이브러리는 `Jest`와 `React Testing Library`를 가정)

- **서버 액션 테스트**
  > `src/app/member/join/actions.ts`에 있는 `joinAction` 서버 액션에 대한 테스트 코드를 작성하고 싶어. 데이터베이스에 사용자가 실제로 생성되는지, 중복된 아이디일 경우 에러를 발생시키는지 등을 어떻게 테스트할 수 있을지 방법을 알려줘.

---

## 🐛 디버깅 및 오류 분석

애플리케이션 실행 중 발생한 오류를 해결하거나 예상치 못한 동작을 분석할 때 사용합니다.

- **오류 로그 분석**
  > `npm run dev` 실행 후 특정 페이지에서 다음과 같은 오류가 발생했어. 원인이 무엇이고 어떻게 해결할 수 있을지 알려줘.
  > ```
  > [여기에 터미널 오류 로그 전체 붙여넣기]
  > ```

- **동작 디버깅**
  > 로그인 기능을 테스트하는데, 유효하지 않은 아이디를 입력해도 로그인이 성공하는 것처럼 보여. `src/app/member/login/actions.ts`와 `src/lib/auth.ts` 코드를 중심으로 어떤 부분에서 논리적 오류가 발생했을 가능성이 있는지 디버깅 포인트를 짚어줘.

---

## 🗃️ 데이터베이스 및 의존성 관리

데이터베이스 스키마를 분석하거나, 새로운 라이브러리를 추가하고 설정할 때 사용합니다.

- **DB 스키마 분석**
  > 현재까지 생성된 Knex 마이그레이션 파일들을 기반으로, 전체 데이터베이스 스키마를 테이블별로 정리해서 보여줘. 각 테이블의 컬럼과 타입, 제약 조건 등을 명시해줘.

- **의존성 추가 및 설정**
  > 날짜 및 시간 포맷팅을 위해 `dayjs` 라이브러리를 프로젝트에 추가하고 싶어. `pnpm`을 사용해서 설치하는 명령어를 알려주고, `YYYY-MM-DD HH:mm` 형식으로 날짜를 변환하는 간단한 유틸리티 함수를 `src/lib/dateUtils.ts` 파일로 만들어줘.

---

## 📝 커밋 및 문서화

작업 완료 후 변경 사항을 기록하거나, 다른 팀원들을 위한 문서를 작성할 때 사용합니다.

- **커밋 메시지 생성**
  > 방금 '게시글 검색 기능'을 완성했어. `git status`와 `git diff` 내용을 바탕으로, Conventional Commits 규칙에 맞는 커밋 메시지 초안을 작성해줘.

- **간단한 기능 문서화**
  > 새로 만든 `ImageUploader.tsx` 컴포넌트의 사용법을 `README.md`에 추가하고 싶어. 어떤 props를 받고, 각 props는 어떤 역할을 하는지, 그리고 기본적인 사용 예시 코드를 포함해서 마크다운 형식으로 작성해줘.